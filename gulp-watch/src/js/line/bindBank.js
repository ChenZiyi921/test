"use strict";var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var bindBank=function(){function e(){_classCallCheck(this,e);var t=location.hostname;/^dev/.test(t)?t="dev.":/^test/.test(t)?t="test-":/^pre/.test(t)?t="pre.":/^mall/.test(t)&&(t=""),this.host=location.protocol+"//"+t+"pay.juzifenqi.com"+("test-"!=t?"/juzi-pay":""),this.jzHost=location.protocol+"//"+location.hostname,this.userId=localStorage.getItem("userId")||"",this.bankCodeId=localStorage.getItem("bankCodeId")||"",this.bankChannel=localStorage.getItem("bankChannel")||"",this.orderId=aspenLib.getQueryString("orderId")||localStorage.getItem("orderId")||"",this.checkbox(),this.bindEvent()}return _createClass(e,[{key:"bindEvent",value:function(){var e=this,t=document.getElementsByClassName("is-checkbox")[0],a=document.getElementById("stagesBtn"),n=document.getElementById("cardNumber");n.addEventListener("input",function(){this.value.length>10?a.classList.remove("gray"):a.classList.add("gray")}),document.querySelector(".bank-select").innerHTML='<i class="bank-icon"><img src="'+localStorage.getItem("backImg")+'" /></i><span>'+localStorage.getItem("bankName")+"</span>",a.addEventListener("click",function(a){var s=(a=a||window.event).target||a.srcElement;!/gray/.test(s.className)&&/active/.test(t.className)?aspenLib.ajax({url:e.host+"/creditCard/confirmBind",type:"post",dataType:"json",data:{application:"shangcheng",customerId:e.userId,bankCodeId:e.bankCodeId,cardNo:n.value,orderId:e.orderId,bankChannel:e.bankChannel},success:function(t){if("000000"==t.code){var a=t.data;"success"==a.errorResult&&"1"==a.isBind?setTimeout(function(){location.href="selectStages.html"},1e3):"cardNoAndBankNotEq"==a.errorResult?aspenLib.tips("卡号和银行不一致"):"bankChannelNotOpen"==a.errorResult&&(aspenLib.tips("银行支付通道未开通"),setTimeout(function(){location.href=""+e.host+a.bankChannelUrl},1e3))}aspenLib.tips(t.msg)},error:function(){console.log("error")}}):/active/.test(t.className)||aspenLib.tips("请勾选协议")})}},{key:"checkbox",value:function(){var e=document.getElementsByClassName("is-checkbox")[0],t=1;e.addEventListener("click",function(){t++%2==0?this.classList.add("active"):this.classList.remove("active")})}}]),e}();new bindBank;